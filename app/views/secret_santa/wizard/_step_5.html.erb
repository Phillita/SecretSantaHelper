<%= render 'errors', object: secret_santa if secret_santa.errors.any? && !@back %>


<%= simple_form_for secret_santa do |f| %>
  <h1><%= link_to_if secret_santa.persisted?, secret_santa.name || 'New Secret Santa', secret_santa %></h1>
  <hr>
  <%= render 'shared/progress_bar', max_step: max_secret_santa_step, step: 5, pre_title: 'Setup Step' %>
  <%= render 'secret_santa/wizard/step_progress_breadcrumbs', secret_santa: secret_santa, step: 5 %>
  <%= hidden_field_tag :step, @step %>
  <h2>How would you like to tell everyone?</h2>
  <details>
    <summary>Why do I need this?</summary>
    <p>In order to get the info to everyone, you need to provide us with a way.</p>
    <p>It's also an easy way for us to make sure that it's a suprise for you!</p>
    <dl>
      <dt>Email</dt>
      <dd>- We will send the person who they are buying for in the sent email.</dd>
      <dt>File</dt>
      <dd>- The file will be named for the individual who should get the file. Their Secret Santa will be inside.</dd>
      <dt>Both</dt>
      <dd>- We'll send a file with the email.</dd>
      <dt>None</dt>
      <dd>- Test mode will diplay the results on the page when you click 'Begin Matching'.</dd>
    </dl>
  </details>
  <hr>

  <div id="secret_santa_notifications" class="row">
    <div class="col-lg-5">
      <h3 class="text-center"><%= f.input :send_email, label: 'I want an Email!' %></h3>
      <%= f.input :email_subject, autofocus: true %>
      <%= f.label 'Email content', for: :email_content %>
      <%= f.trix_editor :email_content %>
    </div>
    <div class="col-lg-2">
      <h3 class="text-center">and/or</h3>
      <br>
      <h4 class="text-center">Tips for your email/file:</h4>
      <dl>
        <dt>{{Giver}}</dt>
        <dd>- The name of the person giving the gift.</dd>
        <dt>{{Receiver}}</dt>
        <dd>- The name of the person the giver will be giving to.</dd>
        <dt>{{SecretSanta}}</dt>
        <dd>- The name of the current Secret Santa you are creating.</dd>
      </dl>
    </div>
    <div class="col-lg-5">
      <h3 class="text-center"><%= f.input :send_file, label: 'I want a File!' %></h3>
      <%= f.input :filename %>
      <%= f.label 'File content', for: :file_content %>
      <%= f.trix_editor :email_content %>
    </div>
  </div>

  <%= f.submit current_user ? 'Finish' : 'Next', class: 'btn btn-success' %>
  <%= f.submit 'Back', class: 'btn btn-primary', style: 'float:left;' %>
<% end %>
