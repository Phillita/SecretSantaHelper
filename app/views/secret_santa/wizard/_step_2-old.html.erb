<%= render 'errors', object: secret_santa if secret_santa.errors.any? && !back %>

<%= simple_form_for secret_santa do |f| %>
  <div class="page-header">
    <h1><%= link_to_if secret_santa.persisted?, secret_santa.name || 'New Secret Santa', secret_santa %></h1>
  </div>

  <%= render 'shared/progress_bar', max_step: max_secret_santa_step, step: step, pre_title: 'Setup Step' %>
  <%= render 'secret_santa/wizard/step_progress_breadcrumbs', secret_santa: secret_santa, step: step %>
  <%= hidden_field_tag :step, step %>

  <div class="page-header">
    <h2>Who are you?</h2>
  </div>

  <div id="secret_santa_user">
    <%= f.simple_fields_for :user do |user| %>
      <%= render 'users/user_fields', f: user %>
    <% end %>
  </div>

  <%= render 'secret_santa/wizard/buttons', f: f, max_step: max_secret_santa_step, step: step %>
<% end %>
